<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<project default="all" name="Node2">

<property name="dir.buildfolder" value="./build" />
<property name="dir.projectfolder" value="." />
<property name="settings.target" value="1.8" />

<target name="all" depends="core" />

<target name="clean">
  <delete dir="${dir.buildfolder}" />
</target>

<target name="test" depends="all">
  <mkdir dir="${dir.buildfolder}/compile/tests" />
  <javac srcdir="${dir.projectfolder}/src/tests"
				 destdir="${dir.buildfolder}/compile/tests"
				 optimize="on"
				 target="${settings.target}"
         classpath="${clp.testall}"
				 includeAntRuntime="no"/>
</target>

<target name="install" />

<!-- ======================== Start of hidden procedures ================== -->

<property name="clp.testall" value="
  ${dir.buildfolder}/compile/engine,
  ${dir.buildfolder}/compile/core,
  ${dir.projectfolder}/lib/Utils.jar,
  ${dir.projectfolder}/lib/junit-4.12.jar,
  ${dir.projectfolder}/lib/hamcrest-core-1.3.jar" />

<target name="core" depends="engine">
  <mkdir dir="${dir.buildfolder}/compile/core" />
  <javac srcdir="${dir.projectfolder}/src/core"
				 destdir="${dir.buildfolder}/compile/core"
				 optimize="on"
				 target="${settings.target}"
         classpath="${dir.projectfolder}/lib/Utils.jar,${dir.buildfolder}/compile/engine"
				 includeAntRuntime="no"/>
</target>

<target name="engine" depends="create-build-folders">
  <mkdir dir="${dir.buildfolder}/compile/engine" />
  <javac srcdir="${dir.projectfolder}/src/engine"
				 destdir="${dir.buildfolder}/compile/engine"
				 optimize="on"
				 target="${settings.target}"
         classpath="${dir.buildfolder}/compile/engine,${dir.projectfolder}/lib/Utils.jar"
				 includeAntRuntime="no"/>
</target>

<target name="create-build-folders">
  <mkdir dir="${dir.buildfolder}" />
	<mkdir dir="${dir.buildfolder}/compile" />
  <mkdir dir="${dir.buildfolder}/export" />
  <mkdir dir="${dir.buildfolder}/test" />
</target>

</project>
